@use './mixins' as *;

.detail-container {
  display: flex;
  justify-content: center;
  padding: 2rem;
  background-color: #f7f8fa;
  min-height: 80vh;

  .detail-box {
    background: #fff;
    padding: 1.5rem 2rem;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    width: 100%;
    max-width: 700px;
    position: relative;

    h1 { margin-bottom: 1rem; font-size: 1.5rem; color: #0f1724; }
    small { color: #888; display: block; margin-bottom: 1rem; font-size: 0.95rem; }
    p { line-height: 1.6; margin-bottom: 1.5rem; color: #222; white-space: pre-wrap; }

    /* 추천/비추천 버튼 중앙 정렬 */
    .post-reactions {
      display: flex;
      justify-content: center; // 중앙 정렬
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;

      button {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.4rem 0.8rem;
        border-radius: 8px;
        border: 1px solid #e6e9ef;
        background-color: #f5f5f5;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;

        &:hover { background-color: #e0e7ff; }

        &.like-btn { color: #0b74ff; border-color: #0b74ff; }
        &.dislike-btn { color: #e53935; border-color: #e53935; }
      }

      .comment-count {
        display: flex;
        align-items: center;
        gap: 0.3rem;
        font-weight: 600;
        color: #6b7280;
      }
    }

    .buttons {
      display: flex;
      justify-content: space-between;
      position: relative;
      margin-top: 1.25rem;
      padding-bottom: 1.25rem;
      border-bottom: 1px solid rgba(0,0,0,0.04);

      .list-btn { @include button-common; @include button-green; }
      .right-buttons {
        display: flex;
        gap: 0.5rem;
        .edit-btn { @include button-common; @include button-blue; }
        .delete-btn { @include button-common; @include button-red; }
      }
    }

    .comments-section {
      margin-top: 2rem;

      h2 {
        margin-bottom: 0.8rem;
        font-size: 1.1rem;
        color: #0f1724;
        display: flex;
        align-items: center;
        gap: 0.5rem;

        .comment-count {
          font-size: 0.95rem;
          color: #6b7280;
        }
      }

      .comment-list {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        margin-bottom: 1rem;

        .comment-item {
          background: #fafafa;
          padding: 0.9rem;
          border-radius: 8px;
          border: 1px solid #f0f2f5;
          position: relative;

          .comment-meta {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-bottom: 0.6rem;
            strong { color: #0f1724; font-size: 0.95rem; }
            span { color: #6b7280; font-size: 0.85rem; }
            &.edited::after { content: " (수정됨)"; color: #f59e0b; font-size: 0.85rem; }
          }

          .comment-body p {
            margin: 0;
            white-space: pre-wrap;
            color: #222;
            padding-right: 80px;
          }

          .comment-actions {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.5rem;

            .comment-action-text {
              cursor: pointer;
              transition: all 0.2s;
              font-size: 0.85rem;
              font-weight: 600;

              &.edit { color: #007bff; &:hover { text-decoration: underline; } }
              &.delete { color: #e53935; &:hover { color: #c62828; } }
              &.save { color: #0b74ff; &:hover { color: #074fc5; text-decoration: underline; cursor: pointer; } }
              &.cancel { color: #6b7280; &:hover { color: #111; text-decoration: underline; cursor: pointer; } }
            }
          }

          .comment-edit textarea {
            min-height: 100px;
            padding: 0.6rem;
            border-radius: 8px;
            border: 1px solid #e6e9ef;
            resize: vertical;
            font-size: 0.95rem;
            width: 100%;
            box-sizing: border-box;
          }

          .comment-edit div {
            display: flex;
            gap: 0.8rem;
            justify-content: flex-end;
          }
        }
      }

      .comment-form {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;

        .author-password {
          display: flex;
          gap: 0.6rem;
          input {
            width: 50%;
            padding: 0.6rem;
            border-radius: 8px;
            border: 1px solid #e6e9ef;
            font-size: 0.95rem;
            box-sizing: border-box;
          }
          input[type="password"] { -webkit-text-security: disc; }
        }

        textarea {
          width: 100%;
          min-height: 80px;
          padding: 0.6rem;
          border-radius: 8px;
          border: 1px solid #e6e9ef;
          font-size: 0.95rem;
          resize: none;
          box-sizing: border-box;
        }

        .comment-form-btns {
          display: flex;
          justify-content: flex-end;
          gap: 0.6rem;
          button {
            @include button-blue;
            @include button-common;
            cursor: pointer;
            &:hover { filter: brightness(0.9); }
          }
        }
      }
    }
  }
}

@media (max-width: 720px) {
  .detail-container { padding: 1rem; }
  .detail-box {
    padding: 1rem;
    h1 { font-size: 1.25rem; }
    p { margin-bottom: 1.5rem; }

    .post-reactions { 
      flex-direction: column; 
      gap: 0.5rem; 
      margin-bottom: 1rem; 
    }

    .buttons { flex-direction: column; gap: 0.6rem; .right-buttons { justify-content: flex-start; } }

    .comments-section {
      margin-top: 1.6rem;
      .comment-item { padding: 0.75rem; }
      .comment-form { margin-top: 0.8rem; .author-password { flex-direction: column; } }
    }
  }
}
